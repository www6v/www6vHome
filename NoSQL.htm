<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"标题 1 Char";
	margin-top:17.0pt;
	margin-right:0cm;
	margin-bottom:16.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:240%;
	page-break-after:avoid;
	font-size:22.0pt;
	font-family:"Calibri","sans-serif";}
h2
	{mso-style-link:"标题 2 Char";
	margin-right:0cm;
	margin-left:0cm;
	font-size:18.0pt;
	font-family:宋体;}
h3
	{mso-style-link:"标题 3 Char";
	margin-top:13.0pt;
	margin-right:0cm;
	margin-bottom:13.0pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:173%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";}
h4
	{mso-style-link:"标题 4 Char";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";}
h5
	{mso-style-link:"标题 5 Char";
	margin-top:14.0pt;
	margin-right:0cm;
	margin-bottom:14.5pt;
	margin-left:0cm;
	text-align:justify;
	text-justify:inter-ideograph;
	line-height:156%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"批注框文本 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	text-indent:21.0pt;
	font-size:10.5pt;
	font-family:"Calibri","sans-serif";}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
span.2Char
	{mso-style-name:"标题 2 Char";
	mso-style-link:"标题 2";
	font-family:宋体;
	font-weight:bold;}
span.5Char
	{mso-style-name:"标题 5 Char";
	mso-style-link:"标题 5";
	font-weight:bold;}
span.1Char
	{mso-style-name:"标题 1 Char";
	mso-style-link:"标题 1";
	font-weight:bold;}
span.Char1
	{mso-style-name:"批注框文本 Char";
	mso-style-link:批注框文本;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-link:"标题 3";
	font-weight:bold;}
span.4Char
	{mso-style-name:"标题 4 Char";
	mso-style-link:"标题 4";
	font-family:"Cambria","serif";
	font-weight:bold;}
 /* Page Definitions */
 @page Section1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>

<div class=Section1 style='layout-grid:15.6pt'>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b><span lang=EN-US style='font-size:16.0pt'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NoSQL</span></b><b><span
style='font-size:16.0pt;font-family:宋体'>知识点</span></b></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>1. NoSQL</span></b><b><span style='font-size:12.0pt;font-family:宋体'>数据结构</span></b></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>大规模数据时，工程实践中常见的数据结构一般有两种：哈希表与平衡树</span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;font-family:宋体'>平衡树<span
lang=EN-US>:</span></span></b><span lang=EN-US style='font-size:12.0pt;
font-family:宋体'> B</span><span style='font-size:12.0pt;font-family:宋体'>树<span
lang=EN-US>, </span>同时适应磁盘和内存<span lang=EN-US>.&nbsp; </span>复杂度为<span
lang=EN-US>O(logN).</span></span></p>

<p class=MsoNormal><b><span style='font-size:12.0pt;font-family:宋体'>哈希表<span
lang=EN-US>:</span></span></b><span lang=EN-US style='font-size:12.0pt;
font-family:宋体'> Hash</span><span style='font-size:12.0pt;font-family:宋体'>数据结构可以高效地执行根据主键的插入、删除以及查找操作<span
lang=EN-US>. </span>但不支持范围查询功能，不支持快照。复杂度为<span lang=EN-US>O(N)</span>。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>存储引擎：</span> </b></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>哈希表对应的存储引擎是随机读取存储引擎<span
lang=EN-US>. </span>一致性<span lang=EN-US>Hash</span>分 桶，每个桶内使用</span><span
lang=EN-US><a href="http://www.nosqlnotes.net/archives/125"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>Log-Structured
Hash Table</span></a></span><span style='font-size:12.0pt;font-family:宋体'>存储数据。
<span lang=EN-US>Eg. Bitcask</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>B+</span><span
style='font-size:12.0pt;font-family:宋体'>树对应的存储引擎是<span lang=EN-US>Merge-Dump</span>存储引擎。
<span lang=EN-US>Eg. Hbase, Cassandra.</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>2. NoSQL </span></b><b><span style='font-size:12.0pt;font-family:宋体'>数据建模技术</span></b></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>Key-Value </span></b><b><span style='font-size:12.0pt;font-family:宋体'>键值对</span></b><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>: </span><span
style='font-size:12.0pt;font-family:宋体'>简单， 不支持范围查找。<span lang=EN-US> Eg. Oracle
Coherence, Redis</span></span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>Ordered Key-Value </span></b><b><span style='font-size:12.0pt;font-family:
宋体'>有序键值对：</span></b><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>map</span><span
style='font-size:12.0pt;font-family:宋体'>里嵌套<span lang=EN-US>map</span>。这种模型的<span
lang=EN-US>value</span>主要通过<span lang=EN-US>“</span>列族<span lang=EN-US>”</span>（<span
lang=EN-US>column families</span>），列，和时间戳来控制版本。<span lang=EN-US>Eg. Apache
HBase, Apache Cassandra</span></span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>Document databases </span></b><b><span style='font-size:12.0pt;font-family:
宋体'>文档模型：</span></b><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>value</span><span
style='font-size:12.0pt;font-family:宋体'>中有主观的模式（<span lang=EN-US>scheme</span>）<span
lang=EN-US>,</span>用字段名做索引<span lang=EN-US>. Eg. MongoDB, CouchDB</span></span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>Graph data models </span></b><b><span style='font-size:12.0pt;font-family:
宋体'>图式数据库<span lang=EN-US>: </span></span></b><span style='font-size:12.0pt;
font-family:宋体'>图结构的数据模型<span lang=EN-US>. neo4j, FlockDB</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>数据库有对象模型与表模型的阻抗不匹配，<span
lang=EN-US>NoSQL</span>的<b>聚合（<span lang=EN-US>Aggregates</span>）模型</b>更贴合<b>对象模型</b>的思路。</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>数据库是面向记录的， <span
lang=EN-US>NoSQL</span>是面向聚集的。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>3. </span></b><b><span style='font-size:12.0pt;font-family:宋体'>一致性</span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>I</span><span
style='font-size:12.0pt;font-family:宋体'>．读写一致性</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>写后读一致性。</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>读后读一致性。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>II</span><span
style='font-size:12.0pt;font-family:宋体'>．写一致性</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>原子写：一次写入操作只能是单独的原子性的赋值。</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>冲突预防： </span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='font-size:12.0pt;
font-family:宋体'>分布式锁或是<span lang=EN-US> PAXOS</span>（悲观锁）。 </span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span style='font-size:12.0pt;
font-family:宋体'>避免分布式的并发写操作，将对特定数据项的所有写操作路由到单个节点上（可以是全局主节点或者分区主节点）。<span
lang=EN-US>Eg Hbase </span></span><span lang=EN-US>region &nbsp;server</span><span
style='font-size:12.0pt;font-family:宋体'>，<span lang=EN-US>MongoDB</span>，大部分关系数据库。</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>冲突检测：</span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp; CAS </span><span
style='font-size:12.0pt;font-family:宋体'>（</span><span lang=EN-US><a
href="http://www.blogjava.net/mstar/archive/2013/04/24/398351.html"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>Compare
And Set</span><span lang=EN-US style='font-size:12.0pt;font-family:宋体;
color:windowtext;text-decoration:none'><span lang=EN-US>）</span></span></a></span><span
style='font-size:12.0pt;font-family:宋体'>模式<span lang=EN-US>, </span>检测并发更新的冲突，选择回滚其中一个版本，或是维持两个版本并交由客户端解决。<span
lang=EN-US> Eg.&nbsp; Dynamo Vector Lock(</span>向量时钟<span lang=EN-US>),
memcache CAS, SVN.</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'><img
border=0 width=552 height=709 id="图片 2" src="NoSQL.files/image001.jpg"
alt="http://pic.yupoo.com/iammutex/Cr4HWbaZ/Js1Ke.png"></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>(A-H)&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>一致性由弱到强</span></p>

<p class=MsoNormal><span lang=EN-US>1.&nbsp; </span><span style='font-size:
12.0pt;font-family:宋体'>一次性读写 </span><span style='font-family:宋体'>（</span><span
lang=EN-US>A</span><span style='font-family:宋体'>），（</span><span lang=EN-US>B</span><span
style='font-family:宋体'>），（</span><span lang=EN-US>C</span><span
style='font-family:宋体'>）</span><span lang=EN-US>,</span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'> </span><span style='font-family:宋体'>（</span><span
lang=EN-US>D</span><span style='font-family:宋体'>）</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>（</span><span
lang=EN-US>A</span><span style='font-family:宋体'>反熵），一致性最弱</span><span
lang=EN-US>. </span><span style='font-family:宋体'>写操作的时候选择任意一个节点更新，在读的时候如果新数据还没有通过后台的反熵协议传递到读的那个节点，那么读到的仍然是旧数据</span>
&nbsp;<span lang=EN-US>Eg. Cassandra &nbsp;Gossip</span><span style='font-family:
宋体'>协议</span></p>

<p class=MsoNormal style='text-indent:15.75pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>（</span><span lang=EN-US>B</span><span style='font-family:宋体'>），（</span><span
lang=EN-US>C</span><span style='font-family:宋体'>）</span><span lang=EN-US>&nbsp;
</span><span style='font-family:宋体'>反熵的变体</span></p>

<p class=MsoNormal style='text-indent:15.75pt'><span style='font-family:宋体'>（</span><span
lang=EN-US>D </span><span style='font-size:12.0pt;font-family:宋体'>一次性读写</span><span
style='font-family:宋体'>）</span> <span style='font-family:宋体'>在总共返回的</span><span
lang=EN-US>N</span><span style='font-family:宋体'>个值中，如果协调器发现有的数据不是最新的。那么它可以通过读时修复机制来对这些节点进行处理。</span><span
lang=EN-US>&nbsp; Eg. &nbsp;Dynamo </span><span style='font-family:宋体'>读时修复</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>2. &nbsp;</span><span style='font-family:
宋体'>（</span><span lang=EN-US>E</span><span style='font-family:宋体'>），（</span><span
lang=EN-US>F</span><span style='font-family:宋体'>）</span><span lang=EN-US>&nbsp;&nbsp;
&nbsp;&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>（</span><span
lang=EN-US>E </span><span style='font-family:宋体'>读若干写若干）</span><span
lang=EN-US> Quorum-based, </span><span style='font-size:12.0pt;font-family:
宋体'>灵活可配置</span><span lang=EN-US>&nbsp; Eg. &nbsp;Dynamo &nbsp;</span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>R+W&gt;N</span><span
style='font-size:12.0pt;font-family:宋体'>， </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>（</span><span
lang=EN-US>F </span><span style='font-family:宋体'>读全部写若干）</span><span
lang=EN-US>&nbsp; </span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>3. </span><span style='font-family:宋体'>（</span><span
lang=EN-US>G</span><span style='font-family:宋体'>）</span><span lang=EN-US>(H)</span></p>

<p class=MsoNormal style='text-indent:15.75pt'><span style='font-family:宋体'>（</span><span
lang=EN-US>G </span><span style='font-family:宋体'>主从）主从异步复制</span><span
lang=EN-US>&nbsp; Eg. Mysql&nbsp; replication</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>(H PAXOS) </span><span
style='font-family:宋体'>使用两阶段提交协议</span><span lang=EN-US>&nbsp; Eg. &nbsp;Oracle
DBLink</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>4. </span></b><b><span style='font-size:12.0pt;font-family:宋体'>事务</span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>I. </span><span
style='font-size:12.0pt;font-family:宋体'>单机事务<span lang=EN-US>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</span></span></p>

<p class=MsoNormal style='text-indent:18.0pt'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'>ACID</span><span style='font-size:12.0pt;
font-family:宋体'>保证</span></p>

<p class=MsoNormal style='text-indent:30.0pt'><span style='font-size:12.0pt;
font-family:宋体'>（<span lang=EN-US>C </span>一致性）（<span lang=EN-US>I </span>隔离性）：</span></p>

<p class=MsoNormal style='text-indent:30.0pt'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp; </span><span
style='font-size:12.0pt;font-family:宋体'>主要有以下几种实现方式</span></p>

<p class=MsoListParagraph style='margin-left:66.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体'>依托锁来实现的。<span
lang=EN-US>&nbsp;&nbsp; </span></span></p>

<p class=MsoListParagraph style='margin-left:66.05pt;text-indent:6.0pt'><span
style='font-size:12.0pt;font-family:宋体'>分类：读写锁， 排他锁。 </span></p>

<p class=MsoListParagraph style='margin-left:66.05pt;text-indent:6.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>4</span><span
style='font-size:12.0pt;font-family:宋体'>个隔离级别和锁的粒度有关。</span></p>

<p class=MsoListParagraph style='margin-left:66.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>copy-on-write</span><span
style='font-size:12.0pt;font-family:宋体'>（<span lang=EN-US>MVCC</span>） <span
lang=EN-US>&nbsp;&nbsp;</span></span></p>

<p class=MsoListParagraph style='margin-left:66.05pt;text-indent:6.0pt'><span
style='font-size:12.0pt;font-family:宋体'>读写之间互不影响，写不阻塞读， 读不阻塞写， 效率高。 </span></p>

<p class=MsoListParagraph style='margin-left:66.05pt;text-indent:6.0pt'><span
style='font-size:12.0pt;font-family:宋体'>实现了隔离级别中用的最多的第二，第三级别。</span></p>

<p class=MsoNormal style='text-indent:48.0pt'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'>3</span><span style='font-size:12.0pt;
font-family:宋体'>． 队列 &nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>II.
</span><span style='font-size:12.0pt;font-family:宋体'>分布式事务<span lang=EN-US>&nbsp;&nbsp;
&nbsp;</span></span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span><span
style='font-size:12.0pt;font-family:宋体'>常规实现</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:0cm'><span
style='font-size:12.0pt;font-family:宋体'>悲观锁： 读写锁（两阶段提交， 三阶段提交）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;</span><span style='font-size:12.0pt;font-family:宋体'>乐观锁： <span
lang=EN-US>Read-Test-Write</span>，<span lang=EN-US> CAS</span>（<span
lang=EN-US>compare and set</span>）</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>分布式的<span lang=EN-US>MVCC&nbsp;
Eg. MegaStore, Percolator </span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>分布式锁： 分布式导致高延迟， 并且加锁解锁多次交互。</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体'>避免分布式锁的实现</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:0cm'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>CAP</span><span
style='font-size:12.0pt;font-family:宋体'>理论中适当放宽一致性。 并兼顾一致性， 响应时间，可用性。 </span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:0cm'><span
style='font-size:12.0pt;font-family:宋体'>参考实现 </span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:0cm'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&lt;&lt;</span><span
lang=EN-US><a href="http://rdc.taobao.com/blog/cs/?p=671" target="_blank"><span
lang=EN-US style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:
none'><span lang=EN-US>用消息队列和消息应用状态表来消除分布式事务</span></span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&gt;&gt;</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:0cm'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&lt;&lt;</span><span
style='font-size:12.0pt;font-family:宋体'>海量存储系列之六<span lang=EN-US>&gt;&gt;</span></span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:6.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>5. </span></b><b><span style='font-size:12.0pt;font-family:宋体'>动态还是静态的数据结构</span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>关系数据库模型： 动态更新的<span
lang=EN-US>B+</span>树， 写数据时，需要更新<span lang=EN-US>B+</span>树。 读写依赖， 实现复杂， 有性能上限。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;
Nosql</span><span style='font-size:12.0pt;font-family:宋体'>：动态数据和静态数据分离， <span
lang=EN-US>MemTable(</span>动态<span lang=EN-US>) + SSTable</span>（静态）。牺牲读， 提升写性能。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><b><span lang=EN-US style='font-size:12.0pt;font-family:
宋体'>6. </span></b><b><span style='font-size:12.0pt;font-family:宋体'>索引和<span
lang=EN-US>join</span></span></b></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>关系数据库索引：单机索引</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;
NoSQL</span><span style='font-size:12.0pt;font-family:宋体'>索引：系统层面， 全局索引。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>关系数据库<span lang=EN-US>Join</span>：
存储引擎层面支持<span lang=EN-US>join</span>。</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;
NoSQL Join</span><span style='font-size:12.0pt;font-family:宋体'>：一般根据应用来决定<span
lang=EN-US>join</span>的实现。<span lang=EN-US>&nbsp; </span></span></p>

<p class=MsoNormal style='text-indent:12.0pt'><span style='font-size:12.0pt;
font-family:宋体'>参考实现 <span lang=EN-US>&nbsp;&lt;&lt;Hbase</span>二级索引<span
lang=EN-US>&gt;&gt;</span></span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><span style='font-size:12.0pt;font-family:宋体'>参考：</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US><a href="http://blog.nosqlfan.com/html/4139.html"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://blog.nosqlfan.com/html/4139.html</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp; &nbsp;&nbsp;&nbsp;NoSQL</span><span
style='font-size:12.0pt;font-family:宋体'>数据库的分布式算法</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US><a href="http://coolshell.cn/articles/7270.html"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://coolshell.cn/articles/7270.html</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;NoSQL
</span><span style='font-size:12.0pt;font-family:宋体'>数据建模技术</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US><a href="http://www.nosqlnotes.net/archives/134"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://www.nosqlnotes.net/archives/134</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp; &nbsp;&nbsp;&nbsp;&nbsp;</span><span
style='font-size:12.0pt;font-family:宋体'>分布式系统的数据结构</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>4.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US><a href="http://blog.nosqlfan.com/html/955.html"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://blog.nosqlfan.com/html/955.html</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp; &nbsp;&nbsp;&nbsp;</span><span
style='font-size:12.0pt;font-family:宋体'>优雅的<span lang=EN-US>Bitcask</span></span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>5.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US><a href="http://www.nosqlnotes.net/archives/62"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://www.nosqlnotes.net/archives/62</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><span style='font-size:12.0pt;font-family:宋体'>分布式事务</span></p>

<p class=MsoListParagraph style='margin-left:48.0pt;text-indent:-18.0pt'><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>6.<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span lang=EN-US><a href="http://www.nosqlnotes.net/archives/140"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://www.nosqlnotes.net/archives/140</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
SQL</span><span style='font-size:12.0pt;font-family:宋体'>到<span lang=EN-US>NOSQL</span>的思维转变</span></p>

<p class=MsoNormal style='margin-left:30.0pt'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'>7. </span><span lang=EN-US><a
href="http://hi.baidu.com/learsu/item/c03e6db9ac8ea2a6ebba934c"><span
style='font-size:12.0pt;font-family:宋体;color:windowtext;text-decoration:none'>http://hi.baidu.com/learsu/item/c03e6db9ac8ea2a6ebba934c</span></a></span><span
lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp; &nbsp;HBase</span><span
style='font-size:12.0pt;font-family:宋体'>二级索引与<span lang=EN-US>Join</span></span></p>

<p class=MsoNormal style='margin-left:30.0pt'><span lang=EN-US
style='font-size:12.0pt;font-family:宋体'>&nbsp;&nbsp; </span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:12.0pt;font-family:宋体'>&nbsp;</span></p>

</div>

</body>

</html>
