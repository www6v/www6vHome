<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:m="http://schemas.microsoft.com/office/2004/12/omml"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 12">
<meta name=Originator content="Microsoft Word 12">
<link rel=File-List href="HDFS_NameNode_HA.files/filelist.xml">
<link rel=Edit-Time-Data href="HDFS_NameNode_HA.files/editdata.mso">
<!--[if !mso]>
<style>
v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>vanceinfo</o:Author>
  <o:LastAuthor>Sky123.Org</o:LastAuthor>
  <o:Revision>2</o:Revision>
  <o:TotalTime>20</o:TotalTime>
  <o:Created>2013-11-07T03:47:00Z</o:Created>
  <o:LastSaved>2013-11-07T03:47:00Z</o:LastSaved>
  <o:Pages>9</o:Pages>
  <o:Words>965</o:Words>
  <o:Characters>5506</o:Characters>
  <o:Company>vanceinfo</o:Company>
  <o:Lines>45</o:Lines>
  <o:Paragraphs>12</o:Paragraphs>
  <o:CharactersWithSpaces>6459</o:CharactersWithSpaces>
  <o:Version>12.00</o:Version>
 </o:DocumentProperties>
</xml><![endif]-->
<link rel=themeData href="HDFS_NameNode_HA.files/themedata.thmx">
<link rel=colorSchemeMapping
href="HDFS_NameNode_HA.files/colorschememapping.xml">
<!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:TrackMoves>false</w:TrackMoves>
  <w:TrackFormatting/>
  <w:DoNotHyphenateCaps/>
  <w:PunctuationKerning/>
  <w:DrawingGridHorizontalSpacing>6 磅</w:DrawingGridHorizontalSpacing>
  <w:DrawingGridVerticalSpacing>6 磅</w:DrawingGridVerticalSpacing>
  <w:DisplayHorizontalDrawingGridEvery>0</w:DisplayHorizontalDrawingGridEvery>
  <w:DisplayVerticalDrawingGridEvery>3</w:DisplayVerticalDrawingGridEvery>
  <w:UseMarginsForDrawingGridOrigin/>
  <w:ValidateAgainstSchemas>false</w:ValidateAgainstSchemas>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:DoNotUnderlineInvalidXML/>
  <w:DoNotPromoteQF/>
  <w:LidThemeOther>EN-US</w:LidThemeOther>
  <w:LidThemeAsian>ZH-CN</w:LidThemeAsian>
  <w:LidThemeComplexScript>X-NONE</w:LidThemeComplexScript>
  <w:DoNotShadeFormData/>
  <w:Compatibility>
   <w:SpaceForUL/>
   <w:BalanceSingleByteDoubleByteWidth/>
   <w:DoNotLeaveBackslashAlone/>
   <w:ULTrailSpace/>
   <w:DoNotExpandShiftReturn/>
   <w:FootnoteLayoutLikeWW8/>
   <w:ShapeLayoutLikeWW8/>
   <w:AlignTablesRowByRow/>
   <w:ForgetLastTabAlignment/>
   <w:AdjustLineHeightInTable/>
   <w:LayoutRawTableWidth/>
   <w:LayoutTableRowsApart/>
   <w:UseWord97LineBreakingRules/>
   <w:SelectEntireFieldWithStartOrEnd/>
   <w:UseWord2002TableStyleRules/>
   <w:DontUseIndentAsNumberingTabStop/>
   <w:FELineBreak11/>
   <w:WW11IndentRules/>
   <w:DontAutofitConstrainedTables/>
   <w:AutofitLikeWW11/>
   <w:UnderlineTabInNumList/>
   <w:HangulWidthLikeWW11/>
   <w:UseNormalStyleForList/>
   <w:UseFELayout/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
  <m:mathPr>
   <m:mathFont m:val="Cambria Math"/>
   <m:brkBin m:val="before"/>
   <m:brkBinSub m:val="--"/>
   <m:smallFrac m:val="off"/>
   <m:dispDef/>
   <m:lMargin m:val="0"/>
   <m:rMargin m:val="0"/>
   <m:defJc m:val="centerGroup"/>
   <m:wrapIndent m:val="1440"/>
   <m:intLim m:val="subSup"/>
   <m:naryLim m:val="undOvr"/>
  </m:mathPr></w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" DefUnhideWhenUsed="true"
  DefSemiHidden="true" DefQFormat="false" DefPriority="99"
  LatentStyleCount="267">
  <w:LsdException Locked="false" Priority="0" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Normal"/>
  <w:LsdException Locked="false" Priority="9" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="heading 1"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 2"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 3"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 4"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 5"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 6"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 7"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 8"/>
  <w:LsdException Locked="false" Priority="9" QFormat="true" Name="heading 9"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 1"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 2"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 3"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 4"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 5"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 6"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 7"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 8"/>
  <w:LsdException Locked="false" Priority="39" Name="toc 9"/>
  <w:LsdException Locked="false" Priority="35" QFormat="true" Name="caption"/>
  <w:LsdException Locked="false" Priority="10" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Title"/>
  <w:LsdException Locked="false" Priority="11" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtitle"/>
  <w:LsdException Locked="false" Priority="22" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Strong"/>
  <w:LsdException Locked="false" Priority="20" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Emphasis"/>
  <w:LsdException Locked="false" Priority="59" SemiHidden="false"
   UnhideWhenUsed="false" Name="Table Grid"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Placeholder Text"/>
  <w:LsdException Locked="false" Priority="1" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="No Spacing"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 1"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 1"/>
  <w:LsdException Locked="false" UnhideWhenUsed="false" Name="Revision"/>
  <w:LsdException Locked="false" Priority="34" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="List Paragraph"/>
  <w:LsdException Locked="false" Priority="29" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Quote"/>
  <w:LsdException Locked="false" Priority="30" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Quote"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 1"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 1"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 1"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 1"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 1"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 1"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 1"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 2"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 2"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 2"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 2"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 2"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 2"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 2"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 2"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 3"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 3"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 3"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 3"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 3"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 3"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 3"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 3"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 4"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 4"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 4"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 4"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 4"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 4"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 4"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 4"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 5"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 5"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 5"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 5"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 5"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 5"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 5"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 5"/>
  <w:LsdException Locked="false" Priority="60" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="61" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light List Accent 6"/>
  <w:LsdException Locked="false" Priority="62" SemiHidden="false"
   UnhideWhenUsed="false" Name="Light Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="63" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="64" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Shading 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="65" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="66" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium List 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="67" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 1 Accent 6"/>
  <w:LsdException Locked="false" Priority="68" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 2 Accent 6"/>
  <w:LsdException Locked="false" Priority="69" SemiHidden="false"
   UnhideWhenUsed="false" Name="Medium Grid 3 Accent 6"/>
  <w:LsdException Locked="false" Priority="70" SemiHidden="false"
   UnhideWhenUsed="false" Name="Dark List Accent 6"/>
  <w:LsdException Locked="false" Priority="71" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Shading Accent 6"/>
  <w:LsdException Locked="false" Priority="72" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful List Accent 6"/>
  <w:LsdException Locked="false" Priority="73" SemiHidden="false"
   UnhideWhenUsed="false" Name="Colorful Grid Accent 6"/>
  <w:LsdException Locked="false" Priority="19" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Emphasis"/>
  <w:LsdException Locked="false" Priority="21" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Emphasis"/>
  <w:LsdException Locked="false" Priority="31" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Subtle Reference"/>
  <w:LsdException Locked="false" Priority="32" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Intense Reference"/>
  <w:LsdException Locked="false" Priority="33" SemiHidden="false"
   UnhideWhenUsed="false" QFormat="true" Name="Book Title"/>
  <w:LsdException Locked="false" Priority="37" Name="Bibliography"/>
  <w:LsdException Locked="false" Priority="39" QFormat="true" Name="TOC Heading"/>
 </w:LatentStyles>
</xml><![endif]-->
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-alt:SimSun;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:1;
	mso-generic-font-family:roman;
	mso-font-format:other;
	mso-font-pitch:variable;
	mso-font-signature:0 0 0 0 0 0;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;
	mso-font-charset:0;
	mso-generic-font-family:roman;
	mso-font-pitch:variable;
	mso-font-signature:-536870145 1073743103 0 0 415 0;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;
	mso-font-charset:134;
	mso-generic-font-family:auto;
	mso-font-pitch:variable;
	mso-font-signature:3 680460288 22 0 262145 0;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-unhide:no;
	mso-style-qformat:yes;
	mso-style-parent:"";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:justify;
	text-justify:inter-ideograph;
	mso-pagination:none;
	font-size:10.5pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"页眉 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	text-align:center;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	border:none;
	mso-border-bottom-alt:solid windowtext .75pt;
	padding:0cm;
	mso-padding-alt:0cm 0cm 1.0pt 0cm;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-link:"页脚 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	mso-pagination:none;
	tab-stops:center 207.65pt right 415.3pt;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Times New Roman","serif";
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
a:link, span.MsoHyperlink
	{mso-style-priority:99;
	mso-style-unhide:no;
	color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{mso-style-noshow:yes;
	mso-style-priority:99;
	color:purple;
	mso-themecolor:followedhyperlink;
	text-decoration:underline;
	text-underline:single;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页眉;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-unhide:no;
	mso-style-locked:yes;
	mso-style-link:页脚;
	mso-ansi-font-size:9.0pt;
	mso-bidi-font-size:9.0pt;}
.MsoChpDefault
	{mso-style-type:export-only;
	mso-default-props:yes;
	font-size:10.5pt;
	mso-ansi-font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	mso-fareast-font-family:宋体;
	mso-font-kerning:1.0pt;}
 /* Page Definitions */
 @page
	{mso-page-border-surround-header:no;
	mso-page-border-surround-footer:no;
	mso-footnote-separator:url("HDFS_NameNode_HA.files/header.htm") fs;
	mso-footnote-continuation-separator:url("HDFS_NameNode_HA.files/header.htm") fcs;
	mso-endnote-separator:url("HDFS_NameNode_HA.files/header.htm") es;
	mso-endnote-continuation-separator:url("HDFS_NameNode_HA.files/header.htm") ecs;}
@page Section1
	{size:612.0pt 792.0pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	mso-header-margin:36.0pt;
	mso-footer-margin:36.0pt;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:265231150;
	mso-list-type:simple;
	mso-list-template-ids:-1591681472;}
@list l0:level1
	{mso-level-text:"%1\)";
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:0cm;
	margin-left:0cm;
	text-indent:0cm;
	font-family:"Times New Roman","serif";}
@list l1
	{mso-list-id:2144038992;
	mso-list-type:simple;
	mso-list-template-ids:-492303772;}
@list l1:level1
	{mso-level-start-at:2;
	mso-level-tab-stop:none;
	mso-level-number-position:left;
	mso-level-legacy:yes;
	mso-level-legacy-indent:18.0pt;
	mso-level-legacy-space:0cm;
	margin-left:0cm;
	text-indent:0cm;
	font-family:"Times New Roman","serif";}
ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:普通表格;
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-priority:99;
	mso-style-qformat:yes;
	mso-style-parent:"";
	mso-padding-alt:0cm 5.4pt 0cm 5.4pt;
	mso-para-margin:0cm;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.5pt;
	mso-bidi-font-size:11.0pt;
	font-family:"Times New Roman","serif";
	mso-font-kerning:1.0pt;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="3074"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=ZH-CN link=blue vlink=purple style='tab-interval:21.0pt;text-justify-trim:
punctuation'>

<div class=Section1>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　</span><span lang=EN-US><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US style='font-size:16.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span>HDFS NameNode HA </span><span
style='font-size:16.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>简述</span><span lang=EN-US
style='font-size:16.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp; </span></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
lang=EN-US style='font-size:12.0pt'>HDFS NameNode</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>是可靠和高效的</span><span lang=EN-US style='font-size:
12.0pt'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>简单的架构使</span><span
lang=EN-US style='font-size:12.0pt'>HDFS</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>能够在上千个节点可靠的存放生产级的数据</span><span lang=EN-US
style='font-size:12.0pt'>. </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>但是</span><span lang=EN-US style='font-size:12.0pt'>, HDFS NameNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>也是一个集群中的单点</span><span
lang=EN-US style='font-size:12.0pt'>(SPOF). </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>开源社区也提供了几个</span><span lang=EN-US style='font-size:
12.0pt'>HA</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的解决方案</span><span
lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'>HDFS Namenode </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>宕机后启动时构建状态的两个相对长的阶段包括</span><span
lang=EN-US style='font-size:12.0pt'>:</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　</span><span lang=EN-US style='font-size:12.0pt'>
I. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>加载</span><span
lang=EN-US style='font-size:12.0pt'>fsimage,</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>并回放</span><span lang=EN-US style='font-size:12.0pt'>editlog.<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>II. datanode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>块的汇报</span><span lang=EN-US
style='font-size:12.0pt'>, blockMap</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的构建</span><span lang=EN-US style='font-size:12.0pt'>.
HDFS Namenode HA</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>主要是指</span><span
lang=EN-US style='font-size:12.0pt'>Ediglog</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的</span><span lang=EN-US style='font-size:12.0pt'>HA,<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>不包括</span><span lang=EN-US style='font-size:12.0pt'>FSImage<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:15.75pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='color:red'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='color:red'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:0cm;text-indent:0cm;mso-list:l0 level1 lfo1;
mso-layout-grid-align:none;text-autospace:none'><![if !supportLists]><b><span
lang=EN-US style='font-size:15.0pt;mso-fareast-font-family:"Times New Roman"'><span
style='mso-list:Ignore'>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;
</span></span></span></b><![endif]><b><span lang=EN-US style='font-size:15.0pt'>HDFS<span
style='mso-spacerun:yes'>&nbsp; </span>HA </span></b><b><span style='font-size:
15.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>解决方案</span></b><b><span lang=EN-US
style='font-size:15.0pt'><o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:11.0pt;font-family:"Arial","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:12.0pt'>Secondary NameNode(SNN)<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'>Secondary
NameNode </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>周期的合并</span><span
lang=EN-US style='font-size:12.0pt'>edits</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'>fsimage</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，能减少集群重启的时间。</span><span
lang=EN-US style='font-size:12.0pt'>SNN</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>会周期的做检查点</span><span lang=EN-US style='font-size:
12.0pt'>(</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>默认一个小时</span><span
lang=EN-US style='font-size:12.0pt'>). </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>如果ＮＮ宕机</span><span lang=EN-US style='font-size:
12.0pt'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>宕机前和上一次</span><span
lang=EN-US style='font-size:12.0pt'>checkpoint</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>这个时间段的状态变更会丢失</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>所以元数据并不是最新</span><span lang=EN-US style='font-size:12.0pt'>.</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　</span><span lang=EN-US
style='font-size:12.0pt'> <o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>当</span><span
lang=EN-US style='font-size:12.0pt'>NameNode(NN)</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>失效的时</span><span style='font-size:12.0pt'> </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>候，</span><span lang=EN-US
style='font-size:12.0pt'>Secondary NN</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>并无法立刻提供服务</span><span lang=EN-US style='font-size:
12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:12.0pt'>BackupNode(BN): <o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></b></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'>BackupNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>是社区版</span><span lang=EN-US
style='font-size:12.0pt'>Hadoop 0.21</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>提供的一种高可用方案。它不仅实现了</span><span lang=EN-US
style='font-size:12.0pt'>SecondaryNameNode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的功能，还实现了复写功能，即同时向</span><span lang=EN-US
style='font-size:12.0pt'>Active Namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'>Standby
Namenode</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>写入</span><span
lang=EN-US style='font-size:12.0pt'>EditLog</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>，这样也避免了共享存储会遇到的</span><span lang=EN-US
style='font-size:12.0pt'>“IO Fencing”</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>问题。</span><span lang=EN-US style='font-size:12.0pt'>
SNN<span style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>是每隔一段时间去</span><span lang=EN-US style='font-size:
12.0pt'><span style='mso-spacerun:yes'>&nbsp; </span>NN<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>下载</span><span lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp; </span>fsimage<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span style='font-size:12.0pt'> <span
lang=EN-US><span style='mso-spacerun:yes'>&nbsp;</span>edits<span
style='mso-spacerun:yes'>&nbsp; </span></span></span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>文件，而</span><span lang=EN-US style='font-size:12.0pt'>NN<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>可以实时的将日志传送给</span><span lang=EN-US
style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp; </span>BN </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，然后将操作合并到</span><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>fsimage<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>里。</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:10.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-font-kerning:0pt;mso-ansi-language:ZH-CN'><!--[if gte vml 1]><v:shapetype
 id="_x0000_t75" coordsize="21600,21600" o:spt="75" o:preferrelative="t"
 path="m@4@5l@4@11@9@11@9@5xe" filled="f" stroked="f">
 <v:stroke joinstyle="miter"/>
 <v:formulas>
  <v:f eqn="if lineDrawn pixelLineWidth 0"/>
  <v:f eqn="sum @0 1 0"/>
  <v:f eqn="sum 0 0 @1"/>
  <v:f eqn="prod @2 1 2"/>
  <v:f eqn="prod @3 21600 pixelWidth"/>
  <v:f eqn="prod @3 21600 pixelHeight"/>
  <v:f eqn="sum @0 0 1"/>
  <v:f eqn="prod @6 1 2"/>
  <v:f eqn="prod @7 21600 pixelWidth"/>
  <v:f eqn="sum @8 21600 0"/>
  <v:f eqn="prod @7 21600 pixelHeight"/>
  <v:f eqn="sum @10 21600 0"/>
 </v:formulas>
 <v:path o:extrusionok="f" gradientshapeok="t" o:connecttype="rect"/>
 <o:lock v:ext="edit" aspectratio="t"/>
</v:shapetype><v:shape id="_x0000_i1025" type="#_x0000_t75" style='width:347.25pt;
 height:148.5pt'>
 <v:imagedata src="HDFS_NameNode_HA.files/image001.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=463 height=198
src="HDFS_NameNode_HA.files/image002.jpg" v:shapes="_x0000_i1025"><![endif]><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";
mso-bidi-font-family:Cambria'>BackupNode </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;
mso-ansi-language:ZH-CN'>很便宜</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Cambria","serif";mso-bidi-font-family:Cambria'>, </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>简易</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>也考虑到了以下的用例</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>: </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>主节点在运行</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, Standby </span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>在线下维护</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>主节点宕机并且不能重启</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>.<span style='mso-spacerun:yes'>&nbsp; </span>Standby</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>需要启动并接管主节点</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>.<span style='mso-spacerun:yes'>&nbsp; </span></span><span lang=EN-US
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'><span
style='mso-spacerun:yes'>&nbsp;</span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;
mso-ansi-language:ZH-CN'>如果</span><span lang=EN-US style='font-size:12.0pt'>Standby</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>不可用，</span><span lang=EN-US
style='font-size:12.0pt'>Active Namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>会把</span><span lang=EN-US style='font-size:12.0pt'>EditLog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>备份到其他的地方。</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'>BackupNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>只能算主从温备，因为</span><span
lang=EN-US style='font-size:12.0pt'>Datanode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>只会向</span><span lang=EN-US style='font-size:12.0pt'>Active
Namenode</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>汇报和保持心跳，一旦</span><span
lang=EN-US style='font-size:12.0pt'>Active Namenode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>发生故障，需要人工切换到</span><span
lang=EN-US style='font-size:12.0pt'>BackupNode</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>上，并且需要在</span><span lang=EN-US style='font-size:
12.0pt'>BackupNode</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>上把</span><span lang=EN-US style='font-size:12.0pt'>BlocksMap</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>状态完全构建起来，这样的切换</span><span
style='font-size:12.0pt'> </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>时间在分钟</span><span lang=EN-US style='font-size:12.0pt'>~</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>小时级别。</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:12.0pt'>AvatarNode:<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>Facebook</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的</span><span lang=EN-US
style='font-size:12.0pt'>AvatarNode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>是业界较早的</span><span lang=EN-US style='font-size:
12.0pt'>Namenode HA</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>方案，它是基于</span><span lang=EN-US style='font-size:12.0pt'>HDFS 0.20</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>实现的，如下图所示。由于采用的是人工切换，所以实现相对简单。</span><span
lang=EN-US style='font-size:12.0pt'>AvatarNode</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>对</span><span lang=EN-US style='font-size:12.0pt'>Namenode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>进行了封装，处于工作状态的叫</span><span
lang=EN-US style='font-size:12.0pt'> Primary Avatar</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，处于热备状态的叫</span><span
lang=EN-US style='font-size:12.0pt'>Standby Avatar(</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>封装了</span><span lang=EN-US
style='font-size:12.0pt'>Namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'>SecondaryNameNode)</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，两者通过</span><span lang=EN-US
style='font-size:12.0pt'>NFS</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>共享</span><span lang=EN-US style='font-size:12.0pt'>EditLog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>所在目录。在工作状态</span><span
style='font-size:12.0pt'> </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>下，</span><span lang=EN-US style='font-size:12.0pt'>Primary Avatar</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>中的</span><span lang=EN-US
style='font-size:12.0pt'>Namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>实例接收</span><span lang=EN-US style='font-size:12.0pt'>Client</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的请求并进行处理，</span><span
lang=EN-US style='font-size:12.0pt'>Datanode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>会向</span><span lang=EN-US style='font-size:12.0pt'>Primary</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US
style='font-size:12.0pt'>Standby</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>两个同时发送</span><span lang=EN-US style='font-size:
12.0pt'> blockReport</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>和心跳，</span><span lang=EN-US style='font-size:12.0pt'>Standby Avatar</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>不断地从共享的</span><span
lang=EN-US style='font-size:12.0pt'>EditLog</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>中持续写入的新事务，并推送给它的</span><span lang=EN-US
style='font-size:12.0pt'>Namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>实例，此时</span><span lang=EN-US style='font-size:12.0pt'>Standby
Avatar</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>内部的</span><span
lang=EN-US style='font-size:12.0pt'>Namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>处于安全模式状态，不对外提供服务，但是状态与</span><span lang=EN-US
style='font-size:12.0pt'>Primary Avatar</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>中的保持一致。一旦</span><span lang=EN-US style='font-size:
12.0pt'>Primary</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>发生故障，管理员进行</span><span
lang=EN-US style='font-size:12.0pt'>Failover</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>切换：首先将原来的</span><span lang=EN-US style='font-size:
12.0pt'>Primary</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>进程杀死</span><span
lang=EN-US style='font-size:12.0pt'>(</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>避免了</span><span lang=EN-US style='font-size:12.0pt'>“Split
Brain”</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>和</span><span
lang=EN-US style='font-size:12.0pt'>“IO Fencing”</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>问题</span><span lang=EN-US style='font-size:12.0pt'>)</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，然后将原来的</span><span
lang=EN-US style='font-size:12.0pt'>Standby</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>设置为</span><span lang=EN-US style='font-size:12.0pt'>Primary</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，新的</span><span lang=EN-US
style='font-size:12.0pt'>Primary</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>会保证回放完成所有的</span><span lang=EN-US style='font-size:
12.0pt'>EditLog</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>事务，然后退出安全模</span><span
style='font-size:12.0pt'> </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>式，对外接收服务请求。为了实现对客户端透明，</span><span lang=EN-US style='font-size:12.0pt'>AvatarNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>主从采用相同的虚拟</span><span
lang=EN-US style='font-size:12.0pt'>IP</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>，切换时将新的</span><span lang=EN-US style='font-size:
12.0pt'>Primary</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>设置为该虚拟</span><span
lang=EN-US style='font-size:12.0pt'>IP</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>即可。整个流程</span><span style='font-size:12.0pt'> </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>可在秒</span><span lang=EN-US
style='font-size:12.0pt'>~</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>分钟级别完成。</span><span lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-font-kerning:0pt;mso-ansi-language:ZH-CN'><!--[if gte vml 1]><v:shape id="_x0000_i1026"
 type="#_x0000_t75" style='width:241.5pt;height:230.25pt'>
 <v:imagedata src="HDFS_NameNode_HA.files/image003.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=322 height=307
src="HDFS_NameNode_HA.files/image004.jpg" v:shapes="_x0000_i1026"><![endif]></span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-font-kerning:0pt;mso-ansi-language:ZH-CN'><!--[if gte vml 1]><v:shape id="_x0000_i1027"
 type="#_x0000_t75" style='width:266.25pt;height:197.25pt'>
 <v:imagedata src="HDFS_NameNode_HA.files/image005.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=355 height=263
src="HDFS_NameNode_HA.files/image006.jpg" v:shapes="_x0000_i1027"><![endif]></span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:12.0pt'>Hadoop 2.0<span
style='mso-spacerun:yes'>&nbsp; </span>HA<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>Hadoop 2.0 HA </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>在很多地方借鉴了</span><span
lang=EN-US style='font-size:12.0pt'> AvatarNode:</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-ansi-language:
ZH-CN'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-ansi-language:ZH-CN'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-font-kerning:0pt;mso-ansi-language:ZH-CN'><!--[if gte vml 1]><v:shape id="_x0000_i1028"
 type="#_x0000_t75" style='width:414.75pt;height:262.5pt'>
 <v:imagedata src="HDFS_NameNode_HA.files/image007.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=553 height=350
src="HDFS_NameNode_HA.files/image008.jpg" v:shapes="_x0000_i1028"><![endif]></span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:24.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span>I. </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>同步</span><span lang=EN-US style='font-size:12.0pt'>edits</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>信息</span><b><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:24.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;</span>NN active</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'>NN
standby</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>之间共享存储</span><span
lang=EN-US style='font-size:12.0pt'>(share storage) edits</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>信息</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>通常用</span><span lang=EN-US style='font-size:12.0pt'>NFS. </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>这相当于单点故障的位置转移到了中高端的存储设备内部</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>依赖外部存储的可靠性</span><span lang=EN-US style='font-size:
12.0pt'>.<span style='mso-spacerun:yes'>&nbsp; </span>NN</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>内部每次元数据变动后的</span><span
lang=EN-US style='font-size:12.0pt'>flush</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>操作，加上</span><span lang=EN-US style='font-size:12.0pt'>NFS</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的</span><span lang=EN-US
style='font-size:12.0pt'>close-to-open</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>，数据的一致性得到了保证。在使用了</span><span lang=EN-US
style='font-size:12.0pt'>NFS</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>做</span><span lang=EN-US style='font-size:12.0pt'>editLog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的</span><span lang=EN-US
style='font-size:12.0pt'>standby</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>这个阶段后</span><span lang=EN-US style='font-size:12.0pt'>,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>社区下个阶段更推崇使用</span><span
lang=EN-US style='font-size:12.0pt'>BookKeeper</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>做</span><span lang=EN-US style='font-size:12.0pt'>EditLog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的存储</span><span lang=EN-US
style='font-size:12.0pt'>. </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>并且这些功能是实现为可插拔的</span><span lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>II. FailoverController</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>作为</span><span lang=EN-US
style='font-size:12.0pt'>NN</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>进程的</span><span lang=EN-US style='font-size:12.0pt'>WatchDog<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>FailoverController</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>是一种协调器</span><span lang=EN-US
style='font-size:12.0pt'>(coordination), </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>作为</span><span lang=EN-US style='font-size:12.0pt'>ZooKeeper</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的客户端</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>主要的指责是领导者选举</span><span lang=EN-US style='font-size:12.0pt'>(leader
election),<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>在</span><span lang=EN-US
style='font-size:12.0pt'>NN</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>宕机之后</span><span lang=EN-US style='font-size:12.0pt'>, </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>自动化的选举出领导者</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>并透明的切换到</span><span lang=EN-US style='font-size:
12.0pt'>standby</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>上</span><span
lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>错误检测机制通过</span><span
lang=EN-US style='font-size:12.0pt'>ZK</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的临时节点</span><span lang=EN-US style='font-size:12.0pt'>(ephemeral
nodes)</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>来实现的</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>用心跳和现在的系统集成在一起</span><span lang=EN-US
style='font-size:12.0pt'>. </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>在</span><span lang=EN-US style='font-size:12.0pt'>NN full gc</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>时</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>会</span><span lang=EN-US style='font-size:12.0pt'>stop the world, </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>对这类</span><span lang=EN-US
style='font-size:12.0pt'>GC</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>有特殊的管理</span><span lang=EN-US style='font-size:12.0pt'>, </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>防止误认为</span><span lang=EN-US
style='font-size:12.0pt'>NN active</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>已宕机</span><span lang=EN-US style='font-size:12.0pt'>,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>剥离出来的</span><span lang=EN-US
style='font-size:12.0pt'>FailoverController</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>能解决这个问题</span><span lang=EN-US style='font-size:
12.0pt'>. <o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>III. fail-over</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>选择</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:30.0pt;mso-char-indent-count:2.5;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>用户想要对</span><span lang=EN-US style='font-size:12.0pt'>fail-over</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>做手工或者自动的热备份</span><span
lang=EN-US style='font-size:12.0pt'>, Hadoop 2.0<span
style='mso-spacerun:yes'>&nbsp; </span>HA</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>提供了这两种选择</span><span lang=EN-US style='font-size:
12.0pt'>.<b><o:p></o:p></b></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>IV. DN block reports<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:30.0pt;mso-char-indent-count:2.5;
mso-layout-grid-align:none;text-autospace:none'><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>向</span><span lang=EN-US style='font-size:12.0pt'>standby</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>回报块</span><span lang=EN-US
style='font-size:12.0pt'>(block reports)</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的逻辑重用了</span><span lang=EN-US style='font-size:
12.0pt'>AvatarNode</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>部分的代码</span><span lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:12.0pt'>Quorum Journal Manager /Paxos HA<o:p></o:p></span></b></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>目前采用最多的就是用共享存储</span><span
lang=EN-US style='font-size:12.0pt'>NAS+NFS, </span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>但这些存储设备要求是</span><span lang=EN-US style='font-size:
12.0pt'>HA</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的</span><span
lang=EN-US style='font-size:12.0pt'>. </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>可以使用</span><span lang=EN-US style='font-size:12.0pt'>RAID</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>技术</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>利用磁盘阵列的手段</span><span lang=EN-US style='font-size:12.0pt'>,<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>提升数据的安全性</span><span lang=EN-US style='font-size:
12.0pt'>. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>但</span><span
lang=EN-US style='font-size:12.0pt'>RAID</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>也有缺陷</span><span lang=EN-US style='font-size:12.0pt'>,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>这个机器的磁盘不可能无限的增加</span><span
lang=EN-US style='font-size:12.0pt'>. </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>单机容量受到磁盘架个数的限制</span><span lang=EN-US
style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>换一个思路</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>可以通过集群</span><span lang=EN-US style='font-size:
12.0pt'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>将多台</span><span
lang=EN-US style='font-size:12.0pt'>pc server</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>联系到一起</span><span lang=EN-US style='font-size:12.0pt'>,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>使用软件逻辑而非硬件逻辑来进行数据的多磁盘备份</span><span
lang=EN-US style='font-size:12.0pt'>.</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>由此产生了</span><span lang=EN-US style='font-size:12.0pt'>Quorum-based
Journaling</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>这个</span><span
lang=EN-US style='font-size:12.0pt'>HA</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>解决方案</span><span lang=EN-US style='font-size:12.0pt'>.
<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-font-kerning:0pt;mso-ansi-language:ZH-CN'><!--[if gte vml 1]><v:shape id="_x0000_i1029"
 type="#_x0000_t75" style='width:400.5pt;height:380.25pt'>
 <v:imagedata src="HDFS_NameNode_HA.files/image009.png" o:title=""/>
</v:shape><![endif]--><![if !vml]><img width=534 height=507
src="HDFS_NameNode_HA.files/image010.gif" v:shapes="_x0000_i1029"><![endif]></span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:24.0pt;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>概述一下</span><span
lang=EN-US style='font-size:12.0pt'>Quorum-based Journaling: </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>多个后台进程的</span><span
lang=EN-US style='font-size:12.0pt'>Quorum commits</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，把这样的后台进程表示为</span><span
lang=EN-US style='font-size:12.0pt'>JournalNodes</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>。每一个</span><span lang=EN-US style='font-size:12.0pt'>JournalNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>暴露一个简单的</span><span
lang=EN-US style='font-size:12.0pt'>RPC</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>接口，允许</span><span lang=EN-US style='font-size:12.0pt'>NameNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>读</span><span
style='font-size:12.0pt'> </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>写</span><span lang=EN-US style='font-size:12.0pt'>edit log</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>，这个</span><span lang=EN-US
style='font-size:12.0pt'>log</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>是存在本地磁盘上。当</span><span lang=EN-US style='font-size:12.0pt'>NameNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>要写一个</span><span lang=EN-US
style='font-size:12.0pt'>edit</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>时，它发送这个</span><span lang=EN-US style='font-size:12.0pt'>edit</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>给集群中所有的</span><span
lang=EN-US style='font-size:12.0pt'>JournalNodes</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>，等待大多数节</span><span style='font-size:12.0pt'> </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>点的回复。一旦大多数回复成功，这个</span><span
lang=EN-US style='font-size:12.0pt'>edit</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>就被认为提交了。</span><span lang=EN-US style='font-size:
12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span>Quorum-based</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>相对于两阶段提交更轻量级</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>但延迟也比较厉害</span><span lang=EN-US style='font-size:
12.0pt'>. QJM</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>有相应的对策</span><span
lang=EN-US style='font-size:12.0pt'>,<span style='mso-spacerun:yes'>&nbsp;
</span>QJM</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>中存储日志的</span><span
lang=EN-US style='font-size:12.0pt'>JournalNode</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>不会因为其中一台的延迟而影响整体的延迟，而且也不会因为</span><span lang=EN-US
style='font-size:12.0pt'>JournalNode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的数量增多而影响性能（因为</span><span lang=EN-US
style='font-size:12.0pt'>NN</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>向</span><span lang=EN-US style='font-size:12.0pt'>JournalNode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>发送日志是并行的）</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;text-indent:-18.0pt;mso-list:l1 level1 lfo2;
tab-stops:18.0pt;mso-layout-grid-align:none;text-autospace:none'><![if !supportLists]><b><span
lang=EN-US style='font-size:15.0pt;mso-fareast-font-family:"Times New Roman"'><span
style='mso-list:Ignore'>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span></b><![endif]><b><span style='font-size:15.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>机制</span></b><b><span lang=EN-US style='font-size:15.0pt'><o:p></o:p></span></b></p>

<p class=MsoNormal style='margin-left:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>在看了些解决方案之后</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>再看一下各个</span><span lang=EN-US style='font-size:
12.0pt'>HA</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>解决方案之后的实现机制</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-left:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>I. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>表决</span><span
lang=EN-US style='font-size:12.0pt'>: </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>相同的组件输入相同的输入</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>他们的计算后的简单输出发送给表决者</span><span lang=EN-US style='font-size:12.0pt'>. </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>如果表决者检测到异常行为</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>就终止这个组件的行为</span><span lang=EN-US style='font-size:
12.0pt'>. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>表决算法可以是</span><span
lang=EN-US style='font-size:12.0pt'>”</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>多数规则</span><span lang=EN-US style='font-size:12.0pt'>”</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>等算法</span><span lang=EN-US
style='font-size:12.0pt'>. <o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>也叫协调器</span><span
lang=EN-US style='font-size:12.0pt'> coordination, eg. </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>两阶段的</span><span lang=EN-US
style='font-size:12.0pt'>deterministic coordinator, PAXOS/Qurumn coordinator
.<span style='mso-spacerun:yes'>&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>II. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>主动冗余</span><span
lang=EN-US style='font-size:12.0pt'>:</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　系统中的组件以并行的方式接受请求</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>仅仅使用一个组件的响应</span><span lang=EN-US style='font-size:12.0pt'>.</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　异常发生时</span><span lang=EN-US
style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>　系统的停机时间是通常是秒级</span><span lang=EN-US style='font-size:12.0pt'>,</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　因为备份组件的状态是最新的</span><span
lang=EN-US style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　如果是自动切换</span><span lang=EN-US style='font-size:
12.0pt'>,</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　停机时间会缩的更短</span><span
lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>Eg. Hadoop 2.0 HA</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>中</span><span lang=EN-US style='font-size:12.0pt'>DN</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>同时向</span><span lang=EN-US
style='font-size:12.0pt'>NN Active</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'>NN
Standby</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>发送</span><span
lang=EN-US style='font-size:12.0pt'>block report.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>扩展</span><span
lang=EN-US style='font-size:12.0pt'>: mapreduce</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>的推测执行</span><span lang=EN-US style='font-size:12.0pt'>
(</span><span lang=EN-US>speculative execution</span><span lang=EN-US
style='font-size:12.0pt'>)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>III. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>被动冗余</span><span
lang=EN-US style='font-size:12.0pt'>:</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　系统中的一个组件接受请求</span><span lang=EN-US
style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>　然后通知备用组件进行状态的更新</span><span lang=EN-US style='font-size:12.0pt'>.</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　何时接管主组件的工作可以由备用组件或其它组件决定</span><span
lang=EN-US style='font-size:12.0pt'>.</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　主组件会发出状态同步的命令</span><span lang=EN-US
style='font-size:12.0pt'>.</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>　</span><span lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span>Eg. AvatarNode </span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'> Hadoop 2.0 HA</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>中</span><span lang=EN-US
style='font-size:12.0pt'>, NN Active </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>同步</span><span lang=EN-US style='font-size:12.0pt'>EditLog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>到</span><span lang=EN-US
style='font-size:12.0pt'>NN Standby</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>中</span><span lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>扩展</span><span
lang=EN-US style='font-size:12.0pt'>:</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　</span><span lang=EN-US style='font-size:12.0pt'>Datanode</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>一备三</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　　　</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>IV. Checkpoint</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>还原点</span><span lang=EN-US style='font-size:12.0pt'>: </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>可以看成是对组件健康状态的一次快照</span><span
lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='tab-stops:348.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'><span
style='mso-spacerun:yes'>&nbsp; </span>Eg. SNN<span style='mso-tab-count:1'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>扩展</span><span
lang=EN-US style='font-size:12.0pt'>: Oracle checkpoint, VM snapshot<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>V. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>状态同步</span><span
lang=EN-US style='font-size:12.0pt'>(</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>状态外移</span><span lang=EN-US style='font-size:12.0pt'>):
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>备用组件在提供服务之前需要和主组件的状态一致</span><span
lang=EN-US style='font-size:12.0pt'>. </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>恢复组件重新提供服务前要同步到失效之前正常的状态</span><span lang=EN-US
style='font-size:12.0pt'>.</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>　</span><span lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>Eg.<span style='mso-spacerun:yes'>&nbsp; </span>Hadoop 2.0 HA</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>中</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>通过被动冗余的</span><span lang=EN-US style='font-size:12.0pt'>editlog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>和主动冗余的</span><span lang=EN-US
style='font-size:12.0pt'>block report, NN Standby</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>回放</span><span lang=EN-US style='font-size:12.0pt'>editlog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>与</span><span lang=EN-US
style='font-size:12.0pt'>fsimage</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>合并来实时和</span><span lang=EN-US style='font-size:
12.0pt'>NN Active</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>的状态保持一致</span><span lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>扩展</span><span
lang=EN-US style='font-size:12.0pt'>:<span style='mso-spacerun:yes'>&nbsp;
</span>Mysql slave </span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>的</span><span lang=EN-US style='font-size:12.0pt'>binlog</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>同步</span><span lang=EN-US
style='font-size:12.0pt'>, Redis slave RDD </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>文件同步</span><span lang=EN-US style='font-size:12.0pt'>
<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>VI. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>命令</span><span
lang=EN-US style='font-size:12.0pt'>/</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>响应</span><span lang=EN-US style='font-size:12.0pt'>(</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>主动</span><span lang=EN-US
style='font-size:12.0pt'>) :</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>　一个组件发出一个命令</span><span lang=EN-US style='font-size:12.0pt'>,</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　并希望在预定义的时间内收到一个来自对方组件的响应</span><span
lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'>Eg,<span
style='mso-spacerun:yes'>&nbsp; </span>FailoverController</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>发送命令给</span><span lang=EN-US
style='font-size:12.0pt'>NN active, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>如果</span><span lang=EN-US style='font-size:12.0pt'>NN
active</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>宕机</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>就不能返回相应</span><span lang=EN-US style='font-size:
12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　</span><span lang=EN-US
style='font-size:12.0pt'>VII. </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>心跳</span><span lang=EN-US style='font-size:12.0pt'>:</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　一个组件定期发出一个消息</span><span
lang=EN-US style='font-size:12.0pt'>(</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>心跳</span><span lang=EN-US style='font-size:12.0pt'>),</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　另一个组件收听这个消息</span><span
lang=EN-US style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　知道组件是否健康</span><span lang=EN-US style='font-size:
12.0pt'>.</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　</span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>Eg: FailoverController</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>通过检测到</span><span lang=EN-US style='font-size:12.0pt'>NN active</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>不健康</span><span lang=EN-US
style='font-size:12.0pt'>,<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>会停止发心跳给</span><span
lang=EN-US style='font-size:12.0pt'>zookeeper,<span
style='mso-spacerun:yes'>&nbsp; </span>zookeeper</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>知道</span><span lang=EN-US style='font-size:12.0pt'>NN
acive</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>已宕机</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>会做领导者的选举</span><span lang=EN-US style='font-size:
12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>VII. </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>影子服务</span><span
lang=EN-US style='font-size:12.0pt'>: </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>备用组件和主组件的状态一致</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>但主组件不宕机的情况下不对外提供服务</span><span lang=EN-US style='font-size:12.0pt'>.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;
</span>Eg. AvatarNode </span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt'> Hadoop 2.0 HA</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>中的</span><span lang=EN-US
style='font-size:12.0pt'>standby<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>VIII.
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>冷备份</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Arial","sans-serif"'>: standby</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>没有运行</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Arial","sans-serif"'>, standby</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>能通过读</span><span lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>fsimage</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Arial","sans-serif"'>editlog, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>等待</span><span lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>block
report</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Arial;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>来建立需要的状态</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>.<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>VIIII.
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>温备份</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Arial","sans-serif"'>: standby</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>装载了</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Arial","sans-serif"'>fsimage</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>和</span><span lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>editlog,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>但没有最近的</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Arial","sans-serif"'>block report. <o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Arial","sans-serif"'>X.
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>热备份</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Arial","sans-serif"'>: standby</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Arial;mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>有足够的驻内存的状态来取代</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Arial","sans-serif"'>active.<o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><b><span
lang=EN-US style='font-size:15.0pt'>3.<span style='mso-spacerun:yes'>&nbsp;
</span></span></b><b><span style='font-size:15.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>权衡</span></b><b><span
lang=EN-US style='font-size:15.0pt'><o:p></o:p></span></b></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";
mso-bidi-font-family:Cambria'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";
mso-bidi-font-family:Cambria'>Backup node</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;
mso-ansi-language:ZH-CN'>异步写有丢失小部分数据的可能</span><span lang=EN-US
style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>但吞吐量好</span><span lang=EN-US style='font-size:12.0pt'>,</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>　延迟低</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>能达到最终一致性</span><span lang=EN-US style='font-size:12.0pt'>. </span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>BackupNode </span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>在宕机时</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>还是需要把状态的远端外部存储拿回</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>这又成了共享存储</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>.<o:p></o:p></span></p>

<p class=MsoNormal style='text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";
mso-bidi-font-family:Cambria'><span style='mso-spacerun:yes'>&nbsp; </span></span><span
lang=EN-US style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:7.05pt;margin-right:0cm;margin-bottom:
7.05pt;margin-left:0cm;text-indent:12.0pt;mso-layout-grid-align:none;
text-autospace:none'><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>如果对数据完整性要求比较高</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>可以使用两阶段提交和</span><span
lang=EN-US style='font-size:12.0pt'>PAXOS. </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>两阶段提交在没有</span><span lang=EN-US style='font-size:
12.0pt'>timeout</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的机制时</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>强依赖备用组件</span><span lang=EN-US style='font-size:
12.0pt'>.<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>实现相对重量级</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>由于要同步提交或者回滚</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>所以延迟高</span><span lang=EN-US style='font-size:12.0pt'>, </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>并且吞吐量低</span><span lang=EN-US
style='font-size:12.0pt'>. <o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:7.05pt;margin-right:0cm;margin-bottom:
7.05pt;margin-left:0cm;text-indent:18.0pt;mso-layout-grid-align:none;
text-autospace:none'><span lang=EN-US style='font-size:12.0pt'>Quorum</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>尝试复制多份数据</span><span
lang=EN-US style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>　只要有过半的节点成功</span><span lang=EN-US
style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>　即整个备份过程成功</span><span lang=EN-US style='font-size:12.0pt'>. PAXOS</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的多个变体通过合理的放弃一些性能与一致性，集群可以容忍几乎多达</span><span
lang=EN-US style='font-size:12.0pt'>n/2</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>个数的节点失效。这种折中在两阶段提交与</span><span lang=EN-US
style='font-size:12.0pt'> PAXOS </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>协议的区别里体现得很明显。所以社区并未出现基于两阶段提交的</span><span
lang=EN-US style='font-size:12.0pt'>HA</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>方案</span><span lang=EN-US style='font-size:12.0pt'>,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>而是出现了</span><span lang=EN-US
style='font-size:12.0pt'>Quorum-based Journaling in CDH4.1<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'><span style='mso-spacerun:yes'>&nbsp;&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>在</span><span lang=EN-US
style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>failover</span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>后的客户端重定向</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>生产中的解决方案</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>, </span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>往往通过</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>virtual IP address</span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>提供</span><span lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";
mso-bidi-font-family:Cambria'>namenode</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;
mso-ansi-language:ZH-CN'>服务</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Cambria","serif";mso-bidi-font-family:Cambria'>,<span
style='mso-spacerun:yes'>&nbsp; </span>standby</span><span style='font-size:
12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;mso-bidi-font-family:宋体;
mso-ansi-language:ZH-CN'>接管为</span><span lang=EN-US style='font-size:12.0pt;
font-family:"Cambria","serif";mso-bidi-font-family:Cambria'>acitive</span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>后会也使用这个虚拟</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'>ip<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-top:7.05pt;margin-right:0cm;margin-bottom:
7.05pt;margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><span style='mso-spacerun:yes'>&nbsp;&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>下图从几个维度给出各种HA解决方案的比较</span><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
Cambria'><o:p>&nbsp;</o:p></span></p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0 width=658
 style='width:493.2pt;margin-left:-5.4pt;border-collapse:collapse;mso-padding-alt:
 0cm .5pt 0cm .5pt'>
 <tr style='mso-yfti-irow:0;mso-yfti-firstrow:yes;height:22.15pt'>
  <td width=92 valign=top style='width:69.05pt;border:solid windowtext 1.0pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=83 valign=top style='width:62.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>备份方式</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=94 valign=top style='width:70.75pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>协议</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=80 valign=top style='width:60.35pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>是否丢数据</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=90 valign=top style='width:67.25pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>可用性</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>切换时间</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=131 valign=top style='width:98.0pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>机制</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=16 valign=top style='width:11.8pt;border:solid windowtext 1.0pt;
  border-left:none;mso-border-left-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:1;height:22.15pt'>
  <td width=92 valign=top style='width:69.05pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>Backup node<o:p></o:p></span></p>
  </td>
  <td width=83 valign=top style='width:62.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>温备</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=94 valign=top style='width:70.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>Master-Slave<o:p></o:p></span></p>
  </td>
  <td width=80 valign=top style='width:60.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>丢数据</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=90 valign=top style='width:67.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>基本可用</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>分钟</span><span lang=EN-US
  style='font-size:12.0pt'>~</span><span style='font-size:12.0pt;font-family:
  宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;
  mso-ansi-language:ZH-CN'>小时级</span><span lang=EN-US style='font-size:12.0pt;
  font-family:"Cambria","serif";mso-bidi-font-family:Cambria'><o:p></o:p></span></p>
  </td>
  <td width=131 valign=top style='width:98.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'>Checkpoint + EditLog</span><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>被动冗余</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=16 valign=top style='width:11.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:2;height:22.15pt'>
  <td width=92 valign=top style='width:69.05pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>AvatarNode<o:p></o:p></span></p>
  </td>
  <td width=83 valign=top style='width:62.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>热备</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=94 valign=top style='width:70.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>数据安全的</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>Master-Slave<o:p></o:p></span></p>
  </td>
  <td width=80 valign=top style='width:60.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>不会丢数据</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=90 valign=top style='width:67.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>高可用</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>/</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
  Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>依赖外部可用性</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>秒</span><span lang=EN-US
  style='font-size:12.0pt'>~</span><span style='font-size:12.0pt;font-family:
  宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;
  mso-ansi-language:ZH-CN'>分钟级别</span><span lang=EN-US style='font-size:12.0pt;
  font-family:"Cambria","serif";mso-bidi-font-family:Cambria'><o:p></o:p></span></p>
  </td>
  <td width=131 valign=top style='width:98.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'>blockmap </span><span style='font-size:
  12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
  宋体;mso-ansi-language:ZH-CN'>主动冗余</span><span lang=EN-US style='font-size:
  12.0pt'> +<span style='mso-spacerun:yes'>&nbsp; </span>EditLog</span><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>被动冗余</span><span lang=EN-US
  style='font-size:12.0pt'> + </span><span style='font-size:12.0pt;font-family:
  宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;
  mso-ansi-language:ZH-CN'>影子服务</span><span lang=EN-US style='font-size:12.0pt;
  font-family:"Cambria","serif";mso-bidi-font-family:Cambria'><o:p></o:p></span></p>
  </td>
  <td width=16 valign=top style='width:11.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:3;height:22.15pt'>
  <td width=92 valign=top style='width:69.05pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>HDFS HA 2.0(NFS)<o:p></o:p></span></p>
  </td>
  <td width=83 valign=top style='width:62.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>热备</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=94 valign=top style='width:70.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>数据安全的</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>Master-Slave<o:p></o:p></span></p>
  </td>
  <td width=80 valign=top style='width:60.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>不会丢数据</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=90 valign=top style='width:67.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>依赖外部可用性</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>/</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
  Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>依赖外部可用性</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'>5-20s</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=131 valign=top style='width:98.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'>blockmap </span><span style='font-size:
  12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
  宋体;mso-ansi-language:ZH-CN'>主动冗余</span><span lang=EN-US style='font-size:
  12.0pt'> +<span style='mso-spacerun:yes'>&nbsp; </span>EditLog</span><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>被动冗余</span><span lang=EN-US
  style='font-size:12.0pt'> + </span><span style='font-size:12.0pt;font-family:
  宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;
  mso-ansi-language:ZH-CN'>影子服务</span><span lang=EN-US style='font-size:12.0pt;
  font-family:"Cambria","serif";mso-bidi-font-family:Cambria'><o:p></o:p></span></p>
  </td>
  <td width=16 valign=top style='width:11.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:4;height:22.15pt'>
  <td width=92 valign=top style='width:69.05pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'>QJM/Qurom Journal Manager</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=83 valign=top style='width:62.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>热备</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=94 valign=top style='width:70.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>PAXOS<o:p></o:p></span></p>
  </td>
  <td width=80 valign=top style='width:60.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>不会丢数据</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=90 valign=top style='width:67.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>高可用</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:Cambria;
  mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>小于</span><span lang=EN-US
  style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'>1</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
  Cambria;mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>分钟</span><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p></o:p></span></p>
  </td>
  <td width=131 valign=top style='width:98.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'>EditLog</span><span style='font-size:
  12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
  宋体;mso-ansi-language:ZH-CN'>被动冗余</span><span lang=EN-US style='font-size:
  12.0pt'>(Quorum-based)</span><span lang=EN-US style='font-size:12.0pt;
  font-family:"Cambria","serif";mso-bidi-font-family:Cambria'><o:p></o:p></span></p>
  </td>
  <td width=16 valign=top style='width:11.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:22.15pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt;font-family:"Cambria","serif";mso-bidi-font-family:
  Cambria'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
 <tr style='mso-yfti-irow:5;mso-yfti-lastrow:yes;height:2.55pt'>
  <td width=92 valign=top style='width:69.05pt;border:solid windowtext 1.0pt;
  border-top:none;mso-border-top-alt:solid windowtext .75pt;mso-border-alt:
  solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=83 valign=top style='width:62.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=94 valign=top style='width:70.75pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=80 valign=top style='width:60.35pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=90 valign=top style='width:67.25pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=72 valign=top style='width:54.0pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=131 valign=top style='width:98.0pt;border-top:none;border-left:
  none;border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
  <td width=16 valign=top style='width:11.8pt;border-top:none;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:solid windowtext 1.0pt;
  mso-border-top-alt:solid windowtext .75pt;mso-border-left-alt:solid windowtext .75pt;
  mso-border-alt:solid windowtext .75pt;padding:0cm .5pt 0cm .5pt;height:2.55pt'>
  <p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
  lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>CAP</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>理论是一个相对论</span><span lang=EN-US style='font-size:
12.0pt'>,<span style='mso-spacerun:yes'>&nbsp; </span></span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>说明在分布式系统中提供的是相对的可用性</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>一致性</span><span lang=EN-US style='font-size:12.0pt'>.<span
style='mso-spacerun:yes'>&nbsp; </span>Hadoop namenode </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>的可用性也是相对的可用</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>以下是一些小结</span><span lang=EN-US style='font-size:
12.0pt'>:<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>Backup Node:<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>延迟比较低</span><span lang=EN-US style='font-size:12.0pt'>,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>吞吐量比较高</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>并能容忍少量的数据丢失</span><span lang=EN-US style='font-size:12.0pt'>.<span
style='mso-spacerun:yes'>&nbsp;&nbsp;&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='margin-top:8.7pt;margin-right:0cm;margin-bottom:8.7pt;
margin-left:0cm;mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>Hadoop HA 2.0: </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>要求数据不能丢失</span><span
lang=EN-US style='font-size:12.0pt'>.<span style='mso-spacerun:yes'>&nbsp;
</span></span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>即可以使用</span><span
lang=EN-US style='font-size:12.0pt'>NFS, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>也可以使用</span><span lang=EN-US style='font-size:12.0pt'>Bookkeeper,
</span><span style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>既可以手动切换</span><span
lang=EN-US style='font-size:12.0pt'>,</span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>也可以自动切换</span><span lang=EN-US style='font-size:
12.0pt'>Standby NN. </span><span style='font-size:12.0pt;font-family:宋体;
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>切换时间短</span><span lang=EN-US style='font-size:12.0pt'>.<span
style='mso-spacerun:yes'>&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>Quorum-based journaling: </span><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>要求数据不能丢失</span><span
lang=EN-US style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;
font-family:宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:
宋体;mso-ansi-language:ZH-CN'>并且对延迟要求不高的情况</span><span lang=EN-US
style='font-size:12.0pt'>, </span><span style='font-size:12.0pt;font-family:
宋体;mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体;mso-ansi-language:
ZH-CN'>也不希望使用昂贵的外部存储</span><span lang=EN-US style='font-size:12.0pt'>.<span
style='mso-spacerun:yes'>&nbsp; </span><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:12.0pt;font-family:宋体;mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体;mso-ansi-language:ZH-CN'>参考:</span><span lang=EN-US
style='font-size:12.0pt'><o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>https://issues.apache.org/jira/browse/HDFS-1623<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>( High Availability Framework for
HDFS NN) <o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://www.docin.com/p-532877866.html<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>(<span
style='mso-spacerun:yes'>&nbsp; </span></span><span style='font-size:12.0pt;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体'>海量存储系列</span><span lang=EN-US
style='font-size:12.0pt'>1-15 )<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://www.infoq.com/cn/articles/hadoop-2-0-namenode-ha-federation-practice-zh
(<span style='mso-spacerun:yes'>&nbsp; </span>Hadoop 2.0 NameNode HA</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体'>和</span><span
lang=EN-US style='font-size:12.0pt'>Federation</span><span style='font-size:
12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体'>实践</span><span lang=EN-US
style='font-size:12.0pt'> )<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://yanbohappy.sinaapp.com/?p=205 (</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体'>基于</span><span
lang=EN-US style='font-size:12.0pt'>QJM/Qurom Journal Manager/Paxos</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体'>的</span><span
lang=EN-US style='font-size:12.0pt'>HDFS HA</span><span style='font-size:12.0pt;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体'>原理及代码分析</span><span lang=EN-US
style='font-size:12.0pt'>)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://www.tuicool.com/articles/EZnE7v
(Quorum-based Journaling in CDH4.1)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://www.infoq.com/cn/news/2012/08/facebook-avatarnode<span
style='mso-spacerun:yes'>&nbsp; </span>(Facebook</span><span style='font-size:
12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体'>如何使用</span><span lang=EN-US
style='font-size:12.0pt'>Avartarnode</span><span style='font-size:12.0pt;
font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体'>提升</span><span lang=EN-US
style='font-size:12.0pt'>HDFS</span><span style='font-size:12.0pt;font-family:
宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:"Times New Roman";
mso-bidi-font-family:宋体'>可靠性</span><span lang=EN-US style='font-size:12.0pt'>)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://www.itinit.net/thread-2468-1-1.html<span
style='mso-spacerun:yes'>&nbsp;&nbsp; </span>(hadoop HA</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体'>使用</span><span
lang=EN-US style='font-size:12.0pt'>Quorum Journal</span><span
style='font-size:12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";
mso-hansi-font-family:"Times New Roman";mso-bidi-font-family:宋体'>的设计</span><span
lang=EN-US style='font-size:12.0pt'>)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'>http://blog.nosqlfan.com/html/4139.html<span
style='mso-spacerun:yes'>&nbsp; </span>(NoSQL</span><span style='font-size:
12.0pt;font-family:宋体;mso-ascii-font-family:"Times New Roman";mso-hansi-font-family:
"Times New Roman";mso-bidi-font-family:宋体'>数据库的分布式算法</span><span lang=EN-US
style='font-size:12.0pt'>)<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
lang=EN-US style='font-size:12.0pt'><o:p>&nbsp;</o:p></span></p>

</div>

</body>

</html>
